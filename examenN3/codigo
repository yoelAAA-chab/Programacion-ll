package programa;

public class Main {
    public static void main(String[] args) {

        Consultorio consultorio = new Consultorio("archivosConsulta", "archivosMedico");


        consultorio.mostrarMedicos();
        consultorio.mostrarConsultas();

        // a
        consultorio.ejercicioA();


        consultorio.mostrarMedicos();
        consultorio.mostrarConsultas();

        // b

        consultorio.ejercicioB("yoel", "agner");
    }
}





package programa;

import java.io.File;
import java.util.ArrayList;

public class Consultorio {
    private String rutaConsultas;
    private String rutaMedicos;

    public Consultorio(String rutaConsultas, String rutaMedicos) {
        this.rutaConsultas = rutaConsultas;
        this.rutaMedicos = rutaMedicos;
        crearDirectorios();
    }

    private void crearDirectorios() {
        new File(rutaConsultas).mkdirs();
        new File(rutaMedicos).mkdirs();
    }

    public void agregarConsulta(Consulta c) {
        c.alta();
    }

    public void agregarMedico(Medico m) {
        m.alta();
    }

    public void mostrarConsultas() {
        ArrayList<Consulta> lista = cargarConsultas();


        if (lista.isEmpty()) {
            System.out.println("No hay consultas registradas.");
        } else {
            for (Consulta c : lista) {
                System.out.println(c);
            }
        }
    }

    public void mostrarMedicos() {
        ArrayList<Medico> lista = cargarMedicos();


        if (lista.isEmpty()) {
            System.out.println("No hay médicos registrados.");
        } else {
            for (Medico m : lista) {
                System.out.println(m);
            }
        }
    }

    public ArrayList<Medico> cargarMedicos() {
        ArrayList<Medico> lista = new ArrayList<>();

        File carpeta = new File(this.rutaMedicos);
        File[] archivos = carpeta.listFiles();

        if (archivos != null) {
            for (File f : archivos) {
                if (f.getName().endsWith(".json")) {
                    Medico nuevo = new Medico();
                    nuevo.cargar(f.getPath());
                    lista.add(nuevo);
                }
            }
        }
        return lista;
    }

    public ArrayList<Consulta> cargarConsultas() {
        ArrayList<Consulta> lista = new ArrayList<>();

        File carpeta = new File(this.rutaConsultas);
        File[] archivos = carpeta.listFiles();

        if (archivos != null) {
            for (File f : archivos) {
                if (f.getName().endsWith(".txt")) {
                    Consulta nuevo = new Consulta();
                    nuevo.carga(f.getPath());
                    lista.add(nuevo);
                }
            }
        }
        return lista;
    }

    // Inciso A: Crear 3 médicos y 9 consultas
    public void ejercicioA() {
        // Crear 3 médicos
        Medico m1 = new Medico(1, "yoel", "agner", 10);
        Medico m2 = new Medico(2, "Maria", "Gomez", 5);
        Medico m3 = new Medico(3, "Carlos", "Lopez", 8);

        agregarMedico(m1);
        agregarMedico(m2);
        agregarMedico(m3);


        Consulta c1 = new Consulta(101, "Ana", "Torres", 1, 10, "Enero", 2024);
        Consulta c2 = new Consulta(102, "Luis", "Mendez", 1, 12, "Enero", 2024);
        Consulta c3 = new Consulta(103, "Sofia", "Rios", 1, 15, "Enero", 2024);


        Consulta c4 = new Consulta(201, "Pedro", "Vargas", 2, 11, "Enero", 2024);
        Consulta c5 = new Consulta(202, "Laura", "Castro", 2, 13, "Enero", 2024);
        Consulta c6 = new Consulta(203, "Miguel", "Silva", 2, 16, "Enero", 2024);

        // Médico 3
        Consulta c7 = new Consulta(301, "Elena", "Ruiz", 3, 10, "Febrero", 2024);
        Consulta c8 = new Consulta(302, "Daniel", "Mora", 3, 14, "Febrero", 2024);
        Consulta c9 = new Consulta(303, "Carmen", "Navarro", 3, 18, "Febrero", 2024);

        agregarConsulta(c1);
        agregarConsulta(c2);
        agregarConsulta(c3);
        agregarConsulta(c4);
        agregarConsulta(c5);
        agregarConsulta(c6);
        agregarConsulta(c7);
        agregarConsulta(c8);
        agregarConsulta(c9);

        System.out.println("a--------------");
    }

    //b
    public void ejercicioB(String nombre, String apellido) {
        ArrayList<Medico> medicos = cargarMedicos();
        int idMedicoEliminar = -1;


        for (Medico m : medicos) {
            if (m.getNombreMed().equals(nombre) && m.getApellidoMed().equals(apellido)) {
                idMedicoEliminar = m.getIdMed();
                System.out.println(" encontrado: " + m);
                m.baja();
                break;
            }
        }

        if (idMedicoEliminar != -1) {
            ArrayList<Consulta> consultas = cargarConsultas();
            for (Consulta c : consultas) {
                if (c.getIdMed() == idMedicoEliminar) {
                    c.baja();
                }
            }
            System.out.println("eliminado");
        } else {
            System.out.println("no encontrado: " + nombre + " " + apellido);
        }
    }
}








package programa;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;

public class Medico {
    private int idMed;
    private String nombreMed;
    private String apellidoMed;
    private int aniosExperiencia;

    public Medico(int idMed, String nombreMed, String apellidoMed, int aniosExperiencia) {
        this.idMed = idMed;
        this.nombreMed = nombreMed;
        this.apellidoMed = apellidoMed;
        this.aniosExperiencia = aniosExperiencia;
    }

    public Medico() {
        this.idMed = -1;
        this.nombreMed = "";
        this.apellidoMed = "";
        this.aniosExperiencia = -1;
    }

    public void alta(){
        String ruta = "archivosMedico/medico" + this.idMed + ".json";
        Gson gson = new GsonBuilder().setPrettyPrinting().create();

        try {
            FileWriter w = new FileWriter(ruta);
            gson.toJson(this, w);
            w.close();
            System.out.println("\t✓ Médico creado: " + this.nombreMed + " " + this.apellidoMed);
        } catch (Exception e) {
            System.out.println("Error al crear médico: " + e.getMessage());
        }
    }

    public void cargar(String ruta){
        Gson gson = new Gson();
        try {
            FileReader r = new FileReader(ruta);
            Medico m = gson.fromJson(r, Medico.class);
            this.idMed = m.getIdMed();
            this.nombreMed = m.getNombreMed();
            this.apellidoMed = m.getApellidoMed();
            this.aniosExperiencia = m.getAniosExperiencia();
            r.close();
        } catch (Exception e) {
            System.out.println("Error al cargar médico: " + e.getMessage());
        }
    }

    public void baja(){
        String ruta = "archivosMedico/medico" + this.idMed + ".json";

        File archivo = new File(ruta);
        if(archivo.delete()){
            System.out.println("\tMédico eliminado: " + archivo.getPath());
        }else{
            System.out.println("\tError al eliminar: " + archivo.getPath());
        }
    }


    public int getIdMed() {
        return idMed;
    }

    public void setIdMed(int idMed) {
        this.idMed = idMed;
    }

    public String getNombreMed() {
        return nombreMed;
    }

    public void setNombreMed(String nombreMed) {
        this.nombreMed = nombreMed;
    }

    public String getApellidoMed() {
        return apellidoMed;
    }

    public void setApellidoMed(String apellidoMed) {
        this.apellidoMed = apellidoMed;
    }

    public int getAniosExperiencia() {
        return aniosExperiencia;
    }

    public void setAniosExperiencia(int aniosExperiencia) {
        this.aniosExperiencia = aniosExperiencia;
    }

    @Override
    public String toString() {
        return "Medico{" + "id=" + idMed + ", nombre='" + nombreMed + '\'' + ", apellido='" + apellidoMed + '\'' + ", experiencia=" + aniosExperiencia + " años}";
    }
}




package programa;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.File;

public class Consulta {
    private int ci;
    private String nombrePaciente;
    private String apellidoPaciente;
    private int idMed;
    private int dia;
    private String mes;
    private int anio;

    public Consulta(int ci, String nombrePaciente, String apellidoPaciente, int idMed, int dia, String mes, int anio) {
        this.ci = ci;
        this.nombrePaciente = nombrePaciente;
        this.apellidoPaciente = apellidoPaciente;
        this.idMed = idMed;
        this.dia = dia;
        this.mes = mes;
        this.anio = anio;
    }

    public Consulta() {
        this.ci = -1;
        this.nombrePaciente = "";
        this.apellidoPaciente = "";
        this.idMed = -1;
        this.dia = -1;
        this.mes = "";
        this.anio = -1;
    }

    public void alta() {
        String ruta = "archivosConsulta/Consulta" + this.ci + ".txt";

        try {
            FileWriter w = new FileWriter(ruta);
            BufferedWriter escritor = new BufferedWriter(w);

            escritor.write("CI: " + this.ci + "\n");
            escritor.write("Paciente: " + this.nombrePaciente + " " + this.apellidoPaciente + "\n");
            escritor.write("ID Médico: " + this.idMed + "\n");
            escritor.write("Fecha: " + this.dia + " de " + this.mes + " de " + this.anio + "\n");

            escritor.close();
            w.close();
            System.out.println("\t✓ Consulta creada: CI " + this.ci);

        } catch (Exception e) {
            System.out.println("ERROR en alta de consulta: " + e.getMessage());
        }
    }

    public void carga(String ruta) {
        try {
            FileReader r = new FileReader(ruta);
            BufferedReader lector = new BufferedReader(r);

            String linea;
            while ((linea = lector.readLine()) != null) {
                if (linea.startsWith("CI: ")) {
                    this.ci = Integer.parseInt(linea.substring(4).trim());
                } else if (linea.startsWith("Paciente: ")) {
                    String nombreCompleto = linea.substring(10).trim();
                    String[] partes = nombreCompleto.split(" ");
                    if (partes.length >= 2) {
                        this.nombrePaciente = partes[0];
                        this.apellidoPaciente = partes[1];
                    }
                } else if (linea.startsWith("ID Médico: ")) {
                    this.idMed = Integer.parseInt(linea.substring(10).trim());
                } else if (linea.startsWith("Fecha: ")) {
                    String fecha = linea.substring(7).trim();

                }
            }

            lector.close();
            r.close();
        } catch (Exception e) {
            System.out.println("ERROR en carga de consulta: " + e.getMessage());
        }
    }

    public void baja() {
        String ruta = "archivosConsulta/Consulta" + this.ci + ".txt";

        File archivo = new File(ruta);

        if (archivo.delete()) {
            System.out.println("\tConsulta eliminada: CI " + this.ci);
        } else {
            System.out.println("\tError al eliminar consulta: CI " + this.ci);
        }
    }

    @Override
    public String toString() {
        return "Consulta{" + "ci=" + ci + ", paciente='" + nombrePaciente + " " + apellidoPaciente + '\'' + ", idMedico=" + idMed + ", fecha=" + dia + "/" + mes + "/" + anio + '}';
    }


    public int getCi() {
        return ci;
    }

    public void setCi(int ci) {
        this.ci = ci;
    }

    public String getNombrePaciente() {
        return nombrePaciente;
    }

    public void setNombrePaciente(String nombrePaciente) {
        this.nombrePaciente = nombrePaciente;
    }

    public String getApellidoPaciente() {
        return apellidoPaciente;
    }

    public void setApellidoPaciente(String apellidoPaciente) {
        this.apellidoPaciente = apellidoPaciente;
    }

    public int getIdMed() {
        return idMed;
    }

    public void setIdMed(int idMed) {
        this.idMed = idMed;
    }

    public int getDia() {
        return dia;
    }

    public void setDia(int dia) {
        this.dia = dia;
    }

    public String getMes() {
        return mes;
    }

    public void setMes(String mes) {
        this.mes = mes;
    }

    public int getAnio() {
        return anio;
    }

    public void setAnio(int anio) {
        this.anio = anio;
    }
}



yoel americo agner asistiri 
